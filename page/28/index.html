<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.2">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.2">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.2">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.2" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.2">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="一个简单的学习交流的个人博客 1975436224@qq.com">
<meta property="og:type" content="website">
<meta property="og:title" content="Welcome to my blog">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;page&#x2F;28&#x2F;index.html">
<meta property="og:site_name" content="Welcome to my blog">
<meta property="og:description" content="一个简单的学习交流的个人博客 1975436224@qq.com">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
  <link rel="canonical" href="http://yoursite.com/page/28/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Welcome to my blog</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Welcome to my blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle"> </p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
        
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      
    
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/21/CRUD%E5%8F%8A%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="黄雄进">
      <meta itemprop="description" content="一个简单的学习交流的个人博客 1975436224@qq.com">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome to my blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/12/21/CRUD%E5%8F%8A%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7/" class="post-title-link" itemprop="url">CRUD及字段属性</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-12-21 11:31:32 / 修改时间：10:05:25" itemprop="dateCreated datePublished" datetime="2019-12-21T11:31:32+08:00">2019-12-21</time>
            </span>
          
            

            
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="模型-models-中常用的字段属性"><a href="#模型-models-中常用的字段属性" class="headerlink" title="模型(models)中常用的字段属性"></a>模型(models)中常用的字段属性</h3><table>
<thead>
<tr>
<th align="center">字段名</th>
<th align="center">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="center">AutoField</td>
<td align="center">自动增长字段，primary_key=True</td>
</tr>
<tr>
<td align="center">IntegerField</td>
<td align="center">整数字段</td>
</tr>
<tr>
<td align="center">SmallIntegerField</td>
<td align="center">小整数数字段</td>
</tr>
<tr>
<td align="center">PositiveSmallItegerField</td>
<td align="center">正小整数字段</td>
</tr>
<tr>
<td align="center">PositiveIntegerField</td>
<td align="center">正整数字段</td>
</tr>
<tr>
<td align="center">BigIntegerField</td>
<td align="center">长整型</td>
</tr>
<tr>
<td align="center">BooleanField</td>
<td align="center">布尔类型，真为True，假为False</td>
</tr>
<tr>
<td align="center">CharField</td>
<td align="center">字符类型，必须提供max_length参数</td>
</tr>
<tr>
<td align="center">TextField</td>
<td align="center">文本类型</td>
</tr>
<tr>
<td align="center">EmailField</td>
<td align="center">字符串类型，提供验证机制</td>
</tr>
<tr>
<td align="center">FloatField</td>
<td align="center">浮点型</td>
</tr>
<tr>
<td align="center">DateField</td>
<td align="center">年-月-日</td>
</tr>
<tr>
<td align="center">DateTimeField</td>
<td align="center">年-月-日 时:分:秒 毫秒 时区</td>
</tr>
<tr>
<td align="center">TimeField</td>
<td align="center">时:分:秒 毫秒 时区</td>
</tr>
<tr>
<td align="center">DecimalField</td>
<td align="center">10进制小数，参数：max_digits:小数总长度，decimal_palce:小数位数</td>
</tr>
<tr>
<td align="center">ImageField</td>
<td align="center">存储图片(二进制或者图片路径)</td>
</tr>
</tbody></table>
<h4 id="约束定义"><a href="#约束定义" class="headerlink" title="约束定义"></a>约束定义</h4><ul>
<li><p>null=True ：不为空</p>
</li>
<li><p>primary_key ：主键</p>
</li>
<li><p>max_length ：最大长度</p>
</li>
<li><p>default ：，默认值</p>
</li>
<li><p>auto_now_add：字段在实例第一次保存的时候会保存当前时间，不管你在这里是否对其赋值。但是之后的save()是可以手动赋值的。也就是新实例化一个model，想手动存其他时间，就需要对该实例save()之后赋值然后再save()</p>
</li>
<li><p>auto_now：字段保存时会自动保存当前时间，但要注意每次对其实例执行save()的时候都会将当前时间保存，也就是不能再手动给它存非当前时间的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 第一种方法：先获取对象，在修改属性，最后保存,s_alter_time会改变</span><br><span class="line"># objects 管理器， filter()结果为Queryset，first()获取结果中第一个元素</span><br><span class="line">stu = Student.objects.filter(s_name=&apos;李四&apos;).first()</span><br><span class="line">print(stu)</span><br><span class="line">stu.s_gaoshu = 95</span><br><span class="line">stu.save()</span><br><span class="line"></span><br><span class="line"># 第二种方法：filter().update()，修改时间s_alter_time不会改变</span><br><span class="line">Student.objects.filter(s_name=&apos;刘备&apos;).update(s_name=&apos;王五&apos;)</span><br><span class="line"></span><br><span class="line">return HttpResponse(&apos;修改数据成功!&apos;</span><br></pre></td></tr></table></figure>




</li>
</ul>
<h3 id="CRUD操作"><a href="#CRUD操作" class="headerlink" title="CRUD操作"></a>CRUD操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">示例：</span><br><span class="line">class Student(models.Model):</span><br><span class="line">    s_name = models.CharField(max_length=10, unique=True, null=False)</span><br><span class="line">    s_age = models.IntegerField(default=20)</span><br><span class="line">    s_gender = models.BooleanField(default=1)</span><br><span class="line">    s_create = models.DateTimeField(auto_now_add=True)</span><br><span class="line">    s_alter_time = models.DateTimeField(auto_now_add=True)</span><br><span class="line">    s_gaoshu = models.DecimalField(max_digits=3, decimal_places=1, null=True)</span><br><span class="line">    s_xiandai = models.DecimalField(max_digits=3, decimal_places=1, null=True)</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = &apos;student&apos;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>objects：管理器  ； filter()结果为Queryset  ； first()获取结果中第一个元素</strong></p>
</blockquote>
<h4 id="1-增加数据"><a href="#1-增加数据" class="headerlink" title="1. 增加数据"></a>1. 增加数据</h4><blockquote>
<p>方法1：对象 = 模型名(字段名=值） 对象.save()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">需定义def __init__方法：</span><br><span class="line">stu = Student(s_name=&apos;张飞&apos;, s_age=20)</span><br><span class="line">stu.save()</span><br></pre></td></tr></table></figure>

<p>方法2：对象 = 模型名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stu = Student()</span><br><span class="line">stu.s_name = &apos;张飞&apos;</span><br><span class="line">stu.s_age = 20</span><br><span class="line">stu.save()</span><br></pre></td></tr></table></figure>

<p>方法3：create()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student.objects.create(s_name=&apos;张飞, s_age=20)</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="2-删除数据"><a href="#2-删除数据" class="headerlink" title="2. 删除数据"></a>2. 删除数据</h4><blockquote>
<p>方法1：通过对象删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stu = Student.objects.filter(id=1).first()</span><br><span class="line">stu.delete()</span><br></pre></td></tr></table></figure>

<p>方法2：直接通过模型删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student.objects.filter(id=1).delete()</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="3-修改数据"><a href="#3-修改数据" class="headerlink" title="3. 修改数据"></a>3. 修改数据</h4><blockquote>
<p>方法1：先获取对象再修改属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stu = Student.objects.filter(s_name=&apos;张飞&apos;)</span><br><span class="line">stu.s_name = &apos;刘备&apos;</span><br><span class="line">stu.s_age = 21</span><br><span class="line">stu.save()</span><br></pre></td></tr></table></figure>

<p>方法2：update()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student.objects.filter(s_name=&apos;张飞&apos;).update(s_name=&apos;刘备&apos;, s_age=21)</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="4-查询数据"><a href="#4-查询数据" class="headerlink" title="4. 查询数据"></a>4. 查询数据</h4><p><strong>基本语法：模型名.objects.属性名</strong></p>
<h5 id="1-filter-条件-：指定条件查询，条件不满足不会报错回返回None"><a href="#1-filter-条件-：指定条件查询，条件不满足不会报错回返回None" class="headerlink" title="1. filter(条件)：指定条件查询，条件不满足不会报错回返回None"></a>1. filter(条件)：指定条件查询，条件不满足不会报错回返回None</h5><p>filter()查询到结果是一个集合不可以直接获取对象的属性，filter().first()查询到的结果是一个对象，可以直接获取对象的属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; stu = Student.objects.filter(s_name=&apos;张飞&apos;)</span><br><span class="line">&gt;&gt;&gt; print(stu)</span><br><span class="line">&lt;QuerySet [&lt;Student: Student object (2)&gt;]&gt;</span><br><span class="line">&gt;&gt;&gt; print(stu.s_gender)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;console&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">AttributeError: &apos;QuerySet&apos; object has no attribute &apos;s_gender&apos;</span><br><span class="line">&gt;&gt;&gt; stu = Student.objects.filter(s_name=&apos;张飞&apos;).first()</span><br><span class="line">&gt;&gt;&gt; print(stu)</span><br><span class="line">Student object (2)</span><br><span class="line">&gt;&gt;&gt; print(stu.s_age)</span><br><span class="line">18</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-all-：查询所有的结果"><a href="#2-all-：查询所有的结果" class="headerlink" title="2. all()：查询所有的结果"></a>2. all()：查询所有的结果</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; Student.objects.all()</span><br><span class="line">&lt;QuerySet [&lt;Student: Student object (1)&gt;, &lt;Student: Student object (2)&gt;, &lt;Student: Student object (3)&gt;, &lt;Student: Student object (4)&gt;, &lt;Student: Student obje</span><br><span class="line">ct (5)&gt;, &lt;Student: Student object (6)&gt;, &lt;Student: Student object (7)&gt;]&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3-values-：获取到的值是字典类型"><a href="#3-values-：获取到的值是字典类型" class="headerlink" title="3. values()：获取到的值是字典类型"></a>3. values()：获取到的值是字典类型</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 查询所有字段</span><br><span class="line">&gt;&gt;&gt; Student.objects.values()</span><br><span class="line">&lt;QuerySet [&#123;&apos;id&apos;: 1, &apos;s_name&apos;: &apos;李四&apos;, &apos;s_age&apos;: 23, &apos;s_gender&apos;: 1, &apos;s_create_time&apos;: datetime.datetime(2019, 9, 18, 3, 33, 22, 284923, tzinfo=&lt;DstTzInfo &apos;Asia</span><br><span class="line">/Chongqing&apos; CST+8:00:00 STD&gt;), &apos;s_alter_time&apos;: datetime.datetime(2019, 11, 7, 12, 15, 41, 770025, tzinfo=&lt;DstTzInfo &apos;Asia/Chongqing&apos; CST+8:00:00 STD&gt;), &apos;s_ga</span><br><span class="line">oshu&apos;: Decimal(&apos;95.0&apos;), &apos;s_xiandai&apos;: Decimal(&apos;85.0&apos;)&#125;]&gt;</span><br><span class="line"></span><br><span class="line"># 指定查询字段</span><br><span class="line">&gt;&gt;&gt; stu = Student.objects.values(&apos;s_name&apos;)</span><br><span class="line">&gt;&gt;&gt; print(stu)</span><br><span class="line">&lt;QuerySet [&#123;&apos;s_name&apos;: &apos;吕布&apos;&#125;, &#123;&apos;s_name&apos;: &apos;大乔&apos;&#125;, &#123;&apos;s_name&apos;: &apos;小乔&apos;&#125;, &#123;&apos;s_name&apos;: &apos;张飞&apos;&#125;, &#123;&apos;s_name&apos;: &apos;李四&apos;&#125;, &#123;&apos;s_name&apos;: &apos;王五&apos;&#125;, &#123;&apos;s_name&apos;: &apos;貂蝉&apos;&#125;]&gt;</span><br></pre></td></tr></table></figure>

<h5 id="4-get-：查询单个对象"><a href="#4-get-：查询单个对象" class="headerlink" title="4. get()：查询单个对象"></a>4. get()：查询单个对象</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; stu = Student.objects.get(s_name=&apos;张飞&apos;)</span><br><span class="line">&gt;&gt;&gt; print(stu)</span><br><span class="line">Student object (2)</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h5 id="5-exclude-条件-：过滤出不满足条件的所有结果"><a href="#5-exclude-条件-：过滤出不满足条件的所有结果" class="headerlink" title="5. exclude(条件)：过滤出不满足条件的所有结果"></a>5. exclude(条件)：过滤出不满足条件的所有结果</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; stu = Student.objects.exclude(s_gender=&apos;1&apos;)</span><br><span class="line">&gt;&gt;&gt; print(stu)</span><br><span class="line">&lt;QuerySet [&lt;Student: Student object (4)&gt;, &lt;Student: Student object (5)&gt;, &lt;Student: Student object (6)&gt;]&gt;</span><br><span class="line">&gt;&gt;&gt; stu = Student.objects.exclude(s_age__gt=20)</span><br><span class="line">&gt;&gt;&gt; print(stu)</span><br><span class="line">&lt;QuerySet [&lt;Student: Student object (2)&gt;, &lt;Student: Student object (4)&gt;, &lt;Student: Student object (5)&gt;, &lt;Student: Student object (6)&gt;, &lt;Student: Student obje</span><br><span class="line">ct (7)&gt;, &lt;Student: Student object (8)&gt;]&gt;</span><br></pre></td></tr></table></figure>

<h5 id="6-order-by：排序"><a href="#6-order-by：排序" class="headerlink" title="6. order_by：排序"></a>6. order_by：排序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 降序 desc</span><br><span class="line">&gt;&gt;&gt; stu_desc = Student.objects.order_by(&apos;-s_age&apos;)</span><br><span class="line">&gt;&gt;&gt; print(stu_desc)</span><br><span class="line">&lt;QuerySet [&lt;Student: Student object (3)&gt;, &lt;Student: Student object (1)&gt;, &lt;Student: Student object (2)&gt;, &lt;Student: Student object (6)&gt;, &lt;Student: Student obje</span><br><span class="line">ct (7)&gt;, &lt;Student: Student object (5)&gt;, &lt;Student: Student object (4)&gt;]&gt;</span><br><span class="line"></span><br><span class="line"># 升序 asc</span><br><span class="line">&gt;&gt;&gt; stu_asc = Student.objects.order_by(&apos;s_age&apos;)</span><br><span class="line">&gt;&gt;&gt; print(stu_asc)</span><br><span class="line">&lt;QuerySet [&lt;Student: Student object (4)&gt;, &lt;Student: Student object (5)&gt;, &lt;Student: Student object (2)&gt;, &lt;Student: Student object (6)&gt;, &lt;Student: Student obje</span><br><span class="line">ct (7)&gt;, &lt;Student: Student object (1)&gt;, &lt;Student: Student object (3)&gt;]&gt;</span><br></pre></td></tr></table></figure>

<h5 id="7-exists-：判断是否存在查询的值，存在True，不存在False"><a href="#7-exists-：判断是否存在查询的值，存在True，不存在False" class="headerlink" title="7. exists()：判断是否存在查询的值，存在True，不存在False"></a>7. exists()：判断是否存在查询的值，存在True，不存在False</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; stu = Student.objects.filter(s_age=30).exists()</span><br><span class="line">&gt;&gt;&gt; print(stu)</span><br><span class="line">False</span><br><span class="line">&gt;&gt;&gt; stu = Student.objects.filter(s_age=18).exists()</span><br><span class="line">&gt;&gt;&gt; print(stu)</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<h5 id="8-count-：计算结果个数"><a href="#8-count-：计算结果个数" class="headerlink" title="8. count()：计算结果个数"></a>8. count()：计算结果个数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; stu = Student.objects.filter(s_age=20).count()</span><br><span class="line">&gt;&gt;&gt; print(stu)</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<h5 id="9"><a href="#9" class="headerlink" title="9."></a>9.</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">查询格式：模型名.objects.属性名</span><br><span class="line">模型名.objects.filter()</span><br><span class="line">filter(条件)：查询满足条件的所有结果，条件不满足不会报错返回空值</span><br><span class="line">all()：查询所有的结果</span><br><span class="line">exclude(条件)：过滤出不满足条件的所有结果</span><br><span class="line">get(条件)：get中的条件必须成立，否则报错</span><br><span class="line">order_by(属性)：排序，-属性：降序(desc) 属性：升序(esc)</span><br><span class="line">filter(属性).exists()：判断是否存在查询的属性值，存在True,不存在False</span><br><span class="line">模型名.objects.all().values()：获取到的是字典</span><br><span class="line">模型名.objects.filter(属性).count()：统计结果的个数</span><br><span class="line"></span><br><span class="line">重点：</span><br><span class="line">1+N查询问题：当查询的对象又关联到其他对象，如果要获取关联对象的属性，在默认情况下，Django的ORM框架会执行1+N查询，效率非常低下。如果查询中存在关联查询，我们可以使用inner join或者left outer join的方式来替代1+N查询</span><br><span class="line">~ 一对一或多对一：select_related(&apos;关联对象&apos;)</span><br><span class="line">~ 多对多：prefetch_related(&apos;关联对象&apos;)</span><br><span class="line"></span><br><span class="line">优化ORM操作：</span><br><span class="line">~ QuerySet ---&gt; only() - 指定只查询哪些属性</span><br><span class="line">~ QuerySet ---&gt; defer() - 指定延迟查询哪些属性</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># 多条件查询, 且或非</span><br><span class="line">and</span><br><span class="line"># 链式 filter().filter().filter()</span><br><span class="line"># stus = Student.objects.filter(s_gender=1).filter(s_age__gt=20)</span><br><span class="line"># print(stus)</span><br><span class="line"># stus = Student.objects.filter(s_gender=1, s_age__gt=20)</span><br><span class="line"># print(stus)</span><br><span class="line"># print(&apos;=========Q========&apos;)</span><br><span class="line"></span><br><span class="line">Q()作用和and一样</span><br><span class="line"># stus = Student.objects.filter(Q(s_gender=1), Q(s_age__gt=20))</span><br><span class="line"># stus = Student.objects.filter(Q(s_gender=1) &amp; Q(s_age__gt=20))</span><br><span class="line"># print(stus)</span><br><span class="line"># print(&apos;========或==========&apos;)</span><br><span class="line"># 或必须将条件用Q括起来</span><br><span class="line"># stus = Student.objects.filter(Q(s_gender=1) | Q(s_age__gt=20))</span><br><span class="line"># print(stus)</span><br><span class="line"></span><br><span class="line"># print(&apos;================非====================&apos;)</span><br><span class="line">非 (查询不大于20的)</span><br><span class="line"># stus = Student.objects.filter(~Q(s_age__gt=20))</span><br><span class="line"># stus = Student.objects.filter(s_age__lte=20)</span><br><span class="line"># stus = Student.objects.exists(s_age__gt=20)</span><br><span class="line"># print(stus)</span><br><span class="line"></span><br><span class="line">模糊查询</span><br><span class="line"># contains(包含),类似于like %羽% / icontains-忽略大小写</span><br><span class="line"># stus = Student.objects.filter(s_name__contains=&apos;羽&apos;)</span><br><span class="line"># print(stus)</span><br><span class="line"></span><br><span class="line"># startswith 查询是否以指定条件开头</span><br><span class="line"># stus = Student.objects.filter(s_name__startswith=&apos;王&apos;)</span><br><span class="line"># print(stus)</span><br><span class="line"></span><br><span class="line"># endswith 查询是否以指定条件结尾</span><br><span class="line"># stus = Student.objects.filter(s_name__endswith=&apos;王&apos;)</span><br><span class="line"># print(stus)</span><br><span class="line"></span><br><span class="line"># F对比两字段的值 / 更新数据</span><br><span class="line"># sql: select * from student where s_gaosu &gt; s_xiandai</span><br><span class="line">stus = Student.objects.filter(s_gaoshu__gt=F(&apos;s_xiandai&apos;))</span><br><span class="line">print(stus)</span><br><span class="line"></span><br><span class="line">stus = Student.objects.filter(s_no=1001)</span><br><span class="line">stus.update(s_age=F(&apos;s_age&apos;)+10)</span><br><span class="line"></span><br><span class="line">stus = Student.objects.filter(s_gaoshu__gt=F(&apos;s_xiandai&apos;) - 10)</span><br><span class="line">print(stus)</span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/27/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><span class="page-number current">28</span><a class="page-number" href="/page/29/">29</a><a class="page-number" href="/page/30/">30</a><a class="extend next" rel="next" href="/page/29/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">黄雄进</p>
  <div class="site-description" itemprop="description">一个简单的学习交流的个人博客 1975436224@qq.com</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">黄雄进</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.2
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.2"></script><script src="/js/motion.js?v=7.4.2"></script>
<script src="/js/schemes/pisces.js?v=7.4.2"></script>

<script src="/js/next-boot.js?v=7.4.2"></script>



  





















  

  

  

</body>
</html>
